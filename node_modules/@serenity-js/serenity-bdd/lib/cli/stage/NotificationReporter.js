"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NotificationReporter = void 0;
const events_1 = require("@serenity-js/core/lib/events");
const model_1 = require("../model");
/**
 * @desc
 *  Notifies the user of any {@apilink Notification} or {@apilink Complaint} type artifacts being reported.
 *
 * @package
 */
class NotificationReporter {
    constructor(printer, stage) {
        this.printer = printer;
        this.stage = stage;
    }
    assignedTo(stage) {
        return new NotificationReporter(this.printer, stage);
    }
    notifyOf(event) {
        if (event instanceof events_1.ArtifactGenerated && event.artifact instanceof model_1.Notification) {
            this.printer.info(event.artifact.map((notification) => notification.message));
        }
        else if (event instanceof events_1.ArtifactGenerated && event.artifact instanceof model_1.Complaint) {
            this.printer.error(event.artifact.map(({ description, message, stack }) => `${description}\n${stack}`));
        }
    }
}
exports.NotificationReporter = NotificationReporter;
//# sourceMappingURL=NotificationReporter.js.map