"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatError = void 0;
const core_1 = require("@serenity-js/core");
/**
 * @package
 */
function formatError(error) {
    const learnMore = `Learn more at https://serenity-js.org/handbook/reporting/serenity-bdd-reporter`;
    switch (true) {
        case /ETIMEDOUT/.test(error.message):
            return lines(`Are you behind a proxy or a firewall that needs to be configured?`, ...messages(error), '', learnMore);
        case /self signed certificate in certificate chain/.test(error.message):
            return lines(`If you're using a self-signed certificate please check if it's configured correctly or use the --ignoreSSL option.`, '', learnMore);
        case /"path" argument must be of type string/.test(error.message):
            return lines(`Serenity BDD requires a Java Runtime Environment, please make sure you have Java installed.`, '', learnMore);
        case error instanceof core_1.RuntimeError:
            return lines(...messages(error), '', learnMore);
        default:
            return lines(`I'm terribly sorry, but something didn't go according to plan:`, ...messages(error));
    }
}
exports.formatError = formatError;
function messages(error, acc = []) {
    return error.message && error.cause
        ? messages(error.cause, acc.concat(error.message))
        : acc.concat(error.message || `${error}`);
}
function lines(...entries) {
    return entries.filter(line => line !== void 0).join('\n');
}
//# sourceMappingURL=formatError.js.map