"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.executionFinishedWith = void 0;
const mappers_1 = require("../mappers");
/**
 * @package
 */
function executionFinishedWith(outcome) {
    return (context) => {
        var _a;
        const outcomeReport = (0, mappers_1.outcomeReportFrom)(outcome);
        context.report.result = outcomeReport.result;
        if (outcomeReport.error) {
            context.report.testFailureCause = outcomeReport.error;
            context.report.testFailureClassname = outcomeReport.error.errorType;
            context.report.testFailureMessage = outcomeReport.error.message;
            context.report.testFailureSummary = [
                outcomeReport.result,
                outcomeReport.error.errorType,
                outcomeReport.error.message,
                ((_a = outcomeReport.error.stackTrace[1]) === null || _a === void 0 ? void 0 : _a.fileName) || '',
            ].join(';');
        }
        return context;
    };
}
exports.executionFinishedWith = executionFinishedWith;
//# sourceMappingURL=executionFinishedWith.js.map